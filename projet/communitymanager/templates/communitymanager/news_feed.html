{% extends 'base.html' %}
{% block title %} Newsfeed {% endblock %}

{% block nav %}
    <li class="nav-item">
        <a class="navbar-text" href="{% url 'news_feed' %}">News feed</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'communities' %}">Communities</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'new_post' %}">Create a post</a>
    </li>
{% endblock %}

{% block content %}
    <div class="container">

        <h1 class="border-title">My subscriptions {{ chosen_pr }} {% if is_event %} is_event {% endif %}</h1>

        {% include 'forms/post_filter.html' %}

        <div class="jumbotron jumbotron-fluid" id="communities_jumbo">
            <table class="table">
                <tr>
                    <th>Community</th>
                    <th>Title</th>
                    <th>Author</th>
                    <th>Description:</th>
                    <th>Date of the event</th>
                    <th>Change the article</th>
                    <th class="right">Date of creation</th>
                </tr>
                {% for post in posts_user %}
                    <tr>
                        <td><a href="{% url 'community' community_id=post.community.id %}">{{ post.community}}</a></td>
                        <td>{{ post.title}}
                            {% include 'forms/post_like.html' %}
                            <br>
                            <a href="{% url 'post' post_id=post.id %}">voir l'article</a></td>
                        <td> {{ post.author}} {{ post.priority }}</td>
                        <td> {{post.description}}</td>
                        {% if post.event %}
                            <td> {{post.date_event}}</td>
                        {% else %}
                            <td class="center"> /</td>
                        {% endif %}
                        {% if request.user == post.author %}
                            <td class="center"><a href="{% url 'modif_post' post_id=post.id %}">Change the article</a></td>
                        {% else %}
                            <td></td>
                        {% endif %}
                        <td class="right">{{post.date_creation}}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>
{% endblock %}